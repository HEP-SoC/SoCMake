<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>cmake.peakrdl/peakrdl_halcpp &#8212; SoCMake 0.2.18 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=12dfc556" />
    <script src="../_static/documentation_options.js?v=ae23a911"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="peakrdl_html" href="peakrdl_html.html" />
    <link rel="prev" title="cmake.peakrdl/peakrdl_docusaurus" href="peakrdl_docusaurus.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-cmake.peakrdl-peakrdl_halcpp">
<span id="cmake-peakrdl-peakrdl-halcpp"></span><h1>cmake.peakrdl/peakrdl_halcpp<a class="headerlink" href="#module-cmake.peakrdl-peakrdl_halcpp" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="cmake.peakrdl-peakrdl_halcpp.peakrdl_halcpp">
<span class="sig-prename descclassname"><span class="pre">cmake.peakrdl/peakrdl_halcpp.</span></span><span class="sig-name descname"><span class="pre">peakrdl_halcpp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">IP_LIB</span> <span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cmake.peakrdl-peakrdl_halcpp.peakrdl_halcpp" title="Link to this definition">¶</a></dt>
<dd><p>Create a target for invoking PeakRDL-halcpp on IP_LIB.</p>
<p>PeakRDL-halcpp generates a C++ 17 Hardware Abstraction Layer (HAL) drivers based on
SystemRDL description. PeakRDL-halcpp can be found on this
<a class="reference external" href="https://github.com/Risto97/PeakRDL-halcpp">link</a></p>
<p>Function expects that <strong>IP_LIB</strong> <em>INTERFACE_LIBRARY</em> has <strong>SYSTEMRDL_SOURCES</strong> property set
with a list of SystemRDL files to be used as inputs. To set the SYSTEMRDL_SOURCES property use
the ip_sources() function from SoCMake (internally using <a class="reference external" href="https://cmake.org/cmake/help/latest/command/set_property.html">set_property()</a> CMake function):</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ip_sources</span><span class="p">(</span><span class="s">IP_LIB</span><span class="w"> </span><span class="s">LANGUAGE</span><span class="w"> </span><span class="s">[SYSTEMRDL|SYSTEMVERILOG|...]</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="s">/file.rdl</span><span class="p">)</span>
</pre></div>
</div>
<p>This function will append CPP source files to the <strong>FILE_SET</strong> <strong>HEADERS</strong> of the <strong>IP_LIB</strong>.</p>
<p>If the <strong>IP_LIB</strong> has a header file called <strong>IP_LIB_ext.h</strong> added to <strong>FILE_SET</strong> <strong>HEADERS</strong>,
that module will be passed to peakrdl-halcpp as --ext argument. Meaning that the extended class
will be used in the hierarchy instead of the HAL generated one.
The function works recursively, so its enough to call it once on the top library of the hierarchy.</p>
<p>To set the extended class to the library this code snippet can be used:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">target_sources</span><span class="p">(</span><span class="o">&lt;</span><span class="n">lib</span><span class="o">&gt;</span><span class="w"> </span><span class="n">INTERFACE</span><span class="w"> </span><span class="n">FILE_SET</span><span class="w"> </span><span class="n">HEADERS</span>
<span class="w">    </span><span class="n">BASE_DIRS</span><span class="w"> </span><span class="s">&quot;${PROJECT_SOURCE_DIR}/firmware/hal&quot;</span>
<span class="w">    </span><span class="n">FILES</span><span class="w"> </span><span class="s">&quot;firmware/hal/&lt;lib&gt;_ext.h&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>IP_LIB</strong> (<em>INTERFACE_LIBRARY</em>) – RTL interface library, it needs to have SYSTEMRDL_SOURCES property set with a list of SystemRDL files.</p>
</dd>
</dl>
<p><strong>Keyword Arguments</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>OUTDIR</strong> (<em>string path</em>) – output directory in which the files will be generated, if ommited ${BINARY_DIR}/halcpp will be used.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cmake.peakrdl-peakrdl_halcpp.__ext_header_provided">
<span class="sig-prename descclassname"><span class="pre">cmake.peakrdl/peakrdl_halcpp.</span></span><span class="sig-name descname"><span class="pre">__ext_header_provided</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">LIB</span> <span class="pre">libs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cmake.peakrdl-peakrdl_halcpp.__ext_header_provided" title="Link to this definition">¶</a></dt>
<dd><p>Find headers that have _ext.h extension and compare with libraries. If there is a library that
matches the file name add it to list.</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">SoCMake</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">cmake.peakrdl</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="peakrdl_docusaurus.html">cmake.peakrdl/peakrdl_docusaurus</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">cmake.peakrdl/peakrdl_halcpp</a></li>
<li class="toctree-l2"><a class="reference internal" href="peakrdl_html.html">peakrdl_html</a></li>
<li class="toctree-l2"><a class="reference internal" href="peakrdl_ipblocksvg.html">cmake.peakrdl/peakrdl_ipblocksvg</a></li>
<li class="toctree-l2"><a class="reference internal" href="peakrdl_print.html">cmake.peakrdl/peakrdl_print</a></li>
<li class="toctree-l2"><a class="reference internal" href="peakrdl_regblock.html">cmake.peakrdl/peakrdl_regblock</a></li>
<li class="toctree-l2"><a class="reference internal" href="peakrdl_socgen.html">cmake.peakrdl/peakrdl_socgen</a></li>
<li class="toctree-l2"><a class="reference internal" href="peakrdl_topgen.html">cmake.peakrdl/peakrdl_topgen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sim/index.html">cmake.sim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../synth/index.html">cmake.synth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systemrdl/index.html">cmake.systemrdl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">cmake.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../verible/index.html">cmake.verible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwip.html">cmake.hwip</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">cmake.peakrdl</a><ul>
      <li>Previous: <a href="peakrdl_docusaurus.html" title="previous chapter">cmake.peakrdl/peakrdl_docusaurus</a></li>
      <li>Next: <a href="peakrdl_html.html" title="next chapter">peakrdl_html</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, CERN.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/peakrdl/peakrdl_halcpp.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>